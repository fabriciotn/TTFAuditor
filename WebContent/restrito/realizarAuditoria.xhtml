
<ui:composition template="/WEB-INF/templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:define name="menu">
		<ui:include src="/WEB-INF/partials/menu.xhtml" />
	</ui:define>

	<ui:define name="conteudo">
		<f:loadBundle basename="messages" var="msg" />
		<p:tabView scrollable="true" id="basic"
			header="Você está respondendo a auditoria #{auditoriaMB.auditoria.codigo}"
			style="margin-bottom:20px; font-size:0.9em;"
			value="#{questionarioMB.allQuestionarios}" var="questionario"
			activeIndex="#{auditoriaMB.currentTab}">

			<p:ajax event="tabChange" listener="#{auditoriaMB.onTabChange}" />

			<p:tab title="#{questionario.titulo}">
				<h:form acceptcharset="ISO-8859-1" id="form">
					<h:inputHidden value="#{auditoriaMB.auditoria.id}" />

					<p:dataTable var="r"
						value="#{auditoriaMB.pegaRespostas(questionario.id)}">

						<p:column headerText="Pergunta" style="width:40em; padding:1em">
							<p:graphicImage value="/images/hint1.png" id="hint" width="20em"
								style="float:right; margin-top:0px; margin-right:0px" />
							<h:outputText id="id_pergunta" value=" Cód.: #{r.id}"
								escape="false" style="font-weight:bold" />
							<p:tooltip id="toolTipTrack" for="hint" value="#{r.hint}"
								trackMouse="true" escape="false"
								style="border:3; white-space:pre-wrap; word-wrap:break-word; font-size:0.9em;" />
							<br />
							<h:outputText id="pergunta" value="#{r.pergunta}" escape="false" />
						</p:column>

						<p:column headerText="Resposta"
							style="width:4em; text-align:center;">
							<h:outputText value="#{r.resposta}" />
						</p:column>

						<p:column headerText="Recomendação"
							style="width:25em; white-space:pre-wrap; word-wrap:break-word; ">
							<h:outputText value="#{r.recomendacao}" />
						</p:column>

						<p:column headerText="Responder"
							style="width:8%; text-align:center">
							<p:lightBox iframe="true" id="lighbox3" height="400px"
								rendered="#{r.resposta == null}" widgetVar="var#{r.id}">
								<h:outputLink value="respondePergunta.xhtml">
									<p:graphicImage value="/images/edit.png" width="25em"
										title="Responder pergunta!" />
									<f:param name="auditoria_id"
										value="#{auditoriaMB.auditoria.id}" />
									<f:param name="resposta_id" value="#{r.id}" />
								</h:outputLink>
							</p:lightBox>

							<p:graphicImage value="/images/ok.png" width="25em"
								rendered="#{r.resposta != null}" title="Pergunta já respondida!" />
						</p:column>
					</p:dataTable>
				</h:form>
			</p:tab>

		</p:tabView>

	</ui:define>

</ui:composition>