
<ui:composition template="/WEB-INF/templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:define name="menu">
		<ui:include src="/WEB-INF/partials/menu.xhtml" />
	</ui:define>

	<ui:define name="conteudo">
		<f:loadBundle basename="messages" var="msg" />

		<ui:param
			value="#{auditoriaMB.questionarioFacade.findQuestionario(request.getParameter('questionarioId'))}"
			name="questionario" />

		<ui:param
			value="#{auditoriaMB.auditoriaFacade.findAuditoria(request.getParameter('auditoriaId'))}"
			name="auditoria" />

		<p:panel id="basic" header="Você está respondendo o questionário"
			style="margin-bottom:20px">

			<h:form acceptcharset="ISO-8859-1" id="form">
				<p:growl id="msgs" showDetail="true" />
				<p:dataTable var="p" value="#{questionario.perguntas}"
					style="border:0" editable="true">

					<p:ajax event="rowEdit" listener="#{dtEditView.onRowEdit}"
						update=":form:msgs" />
					<p:ajax event="rowEditCancel" listener="#{dtEditView.onRowCancel}"
						update=":form:msgs" />

					<p:column headerText="Pergunta" style="width:39em;">
						<p:graphicImage value="/images/hint1.png" id="hint" width="20em" />
						<p:tooltip id="toolTipTrack" for="hint" value="#{p.hint}"
							trackMouse="true" escape="false"
							style="white-space: pre-wrap;word-wrap: break-word;font-size:0.9em;" />
						<br />
						<h:outputText id="pergunta" value="#{p.pergunta}" escape="false"
							style="white-space: pre-wrap;word-wrap: break-word;font-size:0.9em;" />
					</p:column>

					<p:column headerText="Respostas"
						style="width:8em;text-align:center">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{questionario.titulo}" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu id="resposta#{p.id}"
									value="#{auditoriaMB.resposta.resposta}" required="true"
									requiredMessage="O campo Resposta é obrigatório!"
									style="width:8em;">
									<f:selectItem itemLabel="Resposta" itemValue="#{null}"
										noSelectionOption="true" />
									<f:selectItem itemLabel="C" itemValue="C" />
									<f:selectItem itemLabel="NC" itemValue="NC" />
									<f:selectItem itemLabel="NA" itemValue="NA" />
								</p:selectOneMenu>
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Recomendações" style="text-align:center;">
						<p:inputTextarea rows="6" cols="35"
							value="#{auditoriaMB.resposta.recomendacao}" required="true"
							requiredMessage="O campo Recomendação é obrigatório!"
							converter="toUpperCaseConverter" id="recomendacao#{p.id}">
							<f:ajax event="blur" render="@this" />
						</p:inputTextarea>
					</p:column>

					<p:column style="width:32px">
						<p:rowEditor />
					</p:column>
				</p:dataTable>
			</h:form>

		</p:panel>


	</ui:define>

</ui:composition>